<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>租重點 - 3D 格局瀏覽</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Microsoft JhengHei", Arial, sans-serif;
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2196F3 0%, #42A5F5 100%);
            color: white;
            padding: 0 15px;
            height: 56px;
            display: flex;
            align-items: center;
            box-shadow: 0 2px 8px rgba(0,0,0,0.3);
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
        }

        .back-btn {
            background: none;
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
            padding: 8px;
            margin-right: 12px;
        }

        .header-title {
            font-size: 20px;
            font-weight: 600;
            letter-spacing: 1px;
            flex: 1;
        }

        .share-btn {
            background: rgba(255,255,255,0.2);
            border: none;
            color: white;
            padding: 6px 12px;
            border-radius: 6px;
            font-size: 14px;
            cursor: pointer;
        }

        #canvas-container {
            position: absolute;
            top: 56px;
            left: 0;
            right: 0;
            bottom: 0;
        }

        #info {
            position: absolute;
            top: 70px;
            left: 50%;
            transform: translateX(-50%);
            color: white;
            background: rgba(0,0,0,0.7);
            backdrop-filter: blur(10px);
            padding: 12px 20px;
            border-radius: 12px;
            z-index: 100;
            text-align: center;
            font-size: 13px;
        }

        .info-title {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 5px;
            color: #42A5F5;
        }

        #styleButtons {
            position: absolute;
            top: 70px;
            right: 15px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            z-index: 100;
        }

        .styleBtn {
            padding: 10px 15px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 13px;
            font-weight: 600;
            transition: all 0.3s;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            backdrop-filter: blur(10px);
        }

        .styleBtn:active {
            transform: scale(0.95);
        }

        .styleBtn.active {
            transform: scale(1.05);
            box-shadow: 0 0 15px rgba(33, 150, 243, 0.5);
        }

        #cozyBtn {
            background: linear-gradient(135deg, #f6d365 0%, #fda085 100%);
            color: white;
        }

        #industrialBtn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        #hotelBtn {
            background: linear-gradient(135deg, #2196F3 0%, #42A5F5 100%);
            color: white;
        }

        .control-panel {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(10px);
            border-radius: 30px;
            padding: 10px 20px;
            display: flex;
            gap: 15px;
            z-index: 500;
        }

        .control-btn {
            width: 50px;
            height: 50px;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(33, 150, 243, 0.5);
            border-radius: 50%;
            color: white;
            font-size: 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
        }

        .control-btn:active {
            background: rgba(33, 150, 243, 0.5);
            transform: scale(0.95);
        }
    </style>
</head>
<body>
    <div class="header">
        <button class="back-btn" onclick="goBack()">←</button>
        <div class="header-title">3D 格局瀏覽</div>
        <button class="share-btn" onclick="shareView()">分享</button>
    </div>

    <div id="canvas-container"></div>

    <div id="info">
        <div class="info-title">捷運忠孝復興站旁-溫馨套房</div>
        使用滑鼠拖曳旋轉 | 滾輪縮放 | 右鍵平移
    </div>


    <div class="control-panel">
        <button class="control-btn" onclick="resetView()">⟲</button>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
    <script>
        function goBack() {
            window.history.back();
        }

        function shareView() {
            alert('分享 3D 格局連結');
        }

        function resetView() {
            camera.position.set(25, 20, 25);
            controls.target.set(0, 4, 0);
            controls.update();
        }

        // 初始化場景、相機、渲染器
        const scene = new THREE.Scene();
        scene.background = new THREE.Color(0xf5f5f5);

        const container = document.getElementById('canvas-container');
        const camera = new THREE.PerspectiveCamera(
            75,
            container.clientWidth / container.clientHeight,
            0.1,
            1000
        );
        camera.position.set(25, 20, 25);

        const renderer = new THREE.WebGLRenderer({ antialias: true });
        renderer.setSize(container.clientWidth, container.clientHeight);
        renderer.setPixelRatio(window.devicePixelRatio);
        renderer.shadowMap.enabled = true;
        renderer.shadowMap.type = THREE.PCFSoftShadowMap;
        container.appendChild(renderer.domElement);

        // 添加軌道控制器
        const controls = new THREE.OrbitControls(camera, renderer.domElement);
        controls.enableDamping = true;
        controls.dampingFactor = 0.05;
        controls.target.set(0, 4, 0);

        // 定義三種風格的配色方案
        const styles = {
            cozy: {
                floor: 0xf5e6d3,
                wall: 0xfafafa,
                background: 0xfff5ee,
                ambientIntensity: 0.7,
                pointLightColor: 0xffeecc
            },
            industrial: {
                floor: 0x4a4a4a,
                wall: 0xe0e0e0,
                background: 0xd3d3d3,
                ambientIntensity: 0.6,
                pointLightColor: 0xffffff
            },
            hotel: {
                floor: 0xf0f0f0,
                wall: 0xffffff,
                background: 0xf7fafc,
                ambientIntensity: 0.8,
                pointLightColor: 0xfffffa
            }
        };

        let currentStyle = 'cozy';
        let furnitureGroup = new THREE.Group();
        scene.add(furnitureGroup);

        // 添加燈光（會根據風格調整）
        const ambientLight = new THREE.AmbientLight(0xffffff, styles[currentStyle].ambientIntensity);
        scene.add(ambientLight);

        const directionalLight = new THREE.DirectionalLight(0xffffff, 0.5);
        directionalLight.position.set(15, 25, 15);
        directionalLight.castShadow = true;
        directionalLight.shadow.camera.left = -25;
        directionalLight.shadow.camera.right = 25;
        directionalLight.shadow.camera.top = 25;
        directionalLight.shadow.camera.bottom = -25;
        scene.add(directionalLight);

        // 添加點光源增加室內照明
        const pointLight1 = new THREE.PointLight(styles[currentStyle].pointLightColor, 0.3);
        pointLight1.position.set(0, 7, 5);
        scene.add(pointLight1);

        const pointLight2 = new THREE.PointLight(styles[currentStyle].pointLightColor, 0.3);
        pointLight2.position.set(-5, 7, -5);
        scene.add(pointLight2);

        // 公寓尺寸
        const apartmentWidth = 20;
        const apartmentDepth = 16;
        const wallHeight = 9;
        const wallThickness = 0.3;

        // 創建地板
        let floor;
        function createFloor() {
            if (floor) scene.remove(floor);
            const floorGeometry = new THREE.BoxGeometry(apartmentWidth, 0.3, apartmentDepth);
            const floorMaterial = new THREE.MeshPhongMaterial({ color: styles[currentStyle].floor });
            floor = new THREE.Mesh(floorGeometry, floorMaterial);
            floor.position.y = -0.15;
            floor.receiveShadow = true;
            scene.add(floor);
        }

        // 創建牆壁的函數
        function createWall(width, height, depth, color = 0xffffff, opacity = 1) {
            const geometry = new THREE.BoxGeometry(width, height, depth);
            const material = new THREE.MeshPhongMaterial({
                color: color,
                opacity: opacity,
                transparent: opacity < 1
            });
            const wall = new THREE.Mesh(geometry, material);
            wall.castShadow = true;
            wall.receiveShadow = true;
            return wall;
        }

        // 內部牆壁組
        let wallsGroup = new THREE.Group();
        scene.add(wallsGroup);

        function createWalls() {
            while(wallsGroup.children.length > 0) {
                wallsGroup.remove(wallsGroup.children[0]);
            }

            const exteriorOpacity = 0.15;

            const frontWall = createWall(apartmentWidth, wallHeight, wallThickness, 0xffffff, exteriorOpacity);
            frontWall.position.set(0, wallHeight/2, apartmentDepth/2);
            wallsGroup.add(frontWall);

            const backWall = createWall(apartmentWidth, wallHeight, wallThickness, 0xffffff, exteriorOpacity);
            backWall.position.set(0, wallHeight/2, -apartmentDepth/2);
            wallsGroup.add(backWall);

            const leftWall = createWall(wallThickness, wallHeight, apartmentDepth, 0xffffff, exteriorOpacity);
            leftWall.position.set(-apartmentWidth/2, wallHeight/2, 0);
            wallsGroup.add(leftWall);

            const rightWall = createWall(wallThickness, wallHeight, apartmentDepth, 0xffffff, exteriorOpacity);
            rightWall.position.set(apartmentWidth/2, wallHeight/2, 0);
            wallsGroup.add(rightWall);

            const wallColor = styles[currentStyle].wall;

            const corridorWall = createWall(wallThickness, wallHeight, 10, wallColor);
            corridorWall.position.set(-3, wallHeight/2, 0);
            wallsGroup.add(corridorWall);

            const masterBedroomWall = createWall(7, wallHeight, wallThickness, wallColor);
            masterBedroomWall.position.set(-6.5, wallHeight/2, -3);
            wallsGroup.add(masterBedroomWall);

            const bedroom1Wall = createWall(7, wallHeight, wallThickness, wallColor);
            bedroom1Wall.position.set(3.5, wallHeight/2, -3);
            wallsGroup.add(bedroom1Wall);

            const bedroom2Wall = createWall(wallThickness, wallHeight, 5, wallColor);
            bedroom2Wall.position.set(3, wallHeight/2, -5.5);
            wallsGroup.add(bedroom2Wall);

            const bathroom1Wall1 = createWall(4, wallHeight, wallThickness, wallColor);
            bathroom1Wall1.position.set(-8, wallHeight/2, 3);
            wallsGroup.add(bathroom1Wall1);

            const bathroom1Wall2 = createWall(wallThickness, wallHeight, 5, wallColor);
            bathroom1Wall2.position.set(-6, wallHeight/2, 5.5);
            wallsGroup.add(bathroom1Wall2);

            const bathroom2Wall = createWall(4, wallHeight, wallThickness, wallColor);
            bathroom2Wall.position.set(8, wallHeight/2, 3);
            wallsGroup.add(bathroom2Wall);

            const ceilingGeometry = new THREE.BoxGeometry(apartmentWidth, 0.2, apartmentDepth);
            const ceilingMaterial = new THREE.MeshPhongMaterial({
                color: 0xffffff,
                opacity: 0.1,
                transparent: true
            });
            const ceiling = new THREE.Mesh(ceilingGeometry, ceilingMaterial);
            ceiling.position.y = wallHeight;
            wallsGroup.add(ceiling);
        }

        // 創建門的函數
        function createDoor(width = 1, height = 7, depth = 0.1) {
            const doorGroup = new THREE.Group();

            const frameMaterial = new THREE.MeshPhongMaterial({
                color: currentStyle === 'industrial' ? 0x333333 : (currentStyle === 'hotel' ? 0x2d3748 : 0x8b6f47)
            });

            const topFrame = new THREE.Mesh(
                new THREE.BoxGeometry(width + 0.2, 0.1, depth + 0.1),
                frameMaterial
            );
            topFrame.position.y = height / 2;
            doorGroup.add(topFrame);

            const leftFrame = new THREE.Mesh(
                new THREE.BoxGeometry(0.1, height, depth + 0.1),
                frameMaterial
            );
            leftFrame.position.x = -width / 2 - 0.05;
            doorGroup.add(leftFrame);

            const rightFrame = new THREE.Mesh(
                new THREE.BoxGeometry(0.1, height, depth + 0.1),
                frameMaterial
            );
            rightFrame.position.x = width / 2 + 0.05;
            doorGroup.add(rightFrame);

            const doorMaterial = new THREE.MeshPhongMaterial({
                color: currentStyle === 'industrial' ? 0x4a4a4a : (currentStyle === 'hotel' ? 0xf0f0f0 : 0xf5e6d3),
                opacity: 0.2,
                transparent: true
            });
            const doorPanel = new THREE.Mesh(
                new THREE.BoxGeometry(width, height - 0.1, depth),
                doorMaterial
            );
            doorPanel.position.y = -0.05;
            doorGroup.add(doorPanel);

            const handleMaterial = new THREE.MeshPhongMaterial({
                color: currentStyle === 'hotel' ? 0xc0c0c0 : 0x666666
            });
            const handle = new THREE.Mesh(
                new THREE.CylinderGeometry(0.03, 0.03, 0.15),
                handleMaterial
            );
            handle.rotation.z = Math.PI / 2;
            handle.position.set(width * 0.35, 0, depth / 2 + 0.02);
            doorGroup.add(handle);

            return doorGroup;
        }

        let doorsGroup = new THREE.Group();
        scene.add(doorsGroup);

        function createAllDoors() {
            while(doorsGroup.children.length > 0) {
                doorsGroup.remove(doorsGroup.children[0]);
            }

            const mainDoor = createDoor(1.2, 7.5, 0.1);
            mainDoor.position.set(0, 3.75, apartmentDepth/2);
            doorsGroup.add(mainDoor);

            const masterBedroomDoor = createDoor(0.9, 7, 0.1);
            masterBedroomDoor.position.set(-5, 3.5, -3);
            doorsGroup.add(masterBedroomDoor);

            const bedroom1Door = createDoor(0.9, 7, 0.1);
            bedroom1Door.position.set(5, 3.5, -3);
            doorsGroup.add(bedroom1Door);

            const bedroom2Door = createDoor(0.9, 7, 0.1);
            bedroom2Door.rotation.y = Math.PI / 2;
            bedroom2Door.position.set(3, 3.5, -4);
            doorsGroup.add(bedroom2Door);

            const bathroom1Door = createDoor(0.8, 7, 0.1);
            bathroom1Door.position.set(-7, 3.5, 3);
            doorsGroup.add(bathroom1Door);

            const bathroom2Door = createDoor(0.8, 7, 0.1);
            bathroom2Door.position.set(7, 3.5, 3);
            doorsGroup.add(bathroom2Door);
        }

        // 創建溫馨風格家具（豪華完整版）
        function createCozyFurniture() {
            // === 客廳區域 ===
            // L型沙發組
            const sofaGroup = new THREE.Group();

            // 主沙發
            const sofaMain = new THREE.Mesh(
                new THREE.BoxGeometry(6, 1.8, 2.5),
                new THREE.MeshPhongMaterial({ color: 0xd2691e })
            );
            sofaMain.position.set(0, 0.9, 0);
            sofaGroup.add(sofaMain);

            // 側沙發
            const sofaSide = new THREE.Mesh(
                new THREE.BoxGeometry(2.5, 1.8, 4),
                new THREE.MeshPhongMaterial({ color: 0xd2691e })
            );
            sofaSide.position.set(-3.75, 0.9, 1.75);
            sofaGroup.add(sofaSide);

            // 靠枕
            for(let i = 0; i < 4; i++) {
                const cushion = new THREE.Mesh(
                    new THREE.BoxGeometry(1, 0.8, 0.5),
                    new THREE.MeshPhongMaterial({ color: 0xffa54f })
                );
                cushion.position.set(-2 + i * 1.3, 1.5, -0.5);
                sofaGroup.add(cushion);
            }

            sofaGroup.position.set(1, 0, 4.5);
            sofaGroup.rotation.y = Math.PI;
            furnitureGroup.add(sofaGroup);

            // 原木茶几
            const coffeeTableGroup = new THREE.Group();
            const tableTop = new THREE.Mesh(
                new THREE.BoxGeometry(3.5, 0.15, 2),
                new THREE.MeshPhongMaterial({ color: 0x8b4513 })
            );
            tableTop.position.y = 0.6;
            coffeeTableGroup.add(tableTop);

            // 茶几下層
            const shelf = new THREE.Mesh(
                new THREE.BoxGeometry(3.2, 0.1, 1.8),
                new THREE.MeshPhongMaterial({ color: 0x8b4513 })
            );
            shelf.position.y = 0.25;
            coffeeTableGroup.add(shelf);

            // 茶几腿
            for(let x = -1.4; x <= 1.4; x += 2.8) {
                for(let z = -0.8; z <= 0.8; z += 1.6) {
                    const leg = new THREE.Mesh(
                        new THREE.BoxGeometry(0.15, 0.6, 0.15),
                        new THREE.MeshPhongMaterial({ color: 0x8b4513 })
                    );
                    leg.position.set(x, 0.3, z);
                    coffeeTableGroup.add(leg);
                }
            }
            coffeeTableGroup.position.set(1, 0, 1.5);
            furnitureGroup.add(coffeeTableGroup);

            // 電視櫃
            const tvStand = new THREE.Mesh(
                new THREE.BoxGeometry(4.5, 1, 0.7),
                new THREE.MeshPhongMaterial({ color: 0x654321 })
            );
            tvStand.position.set(1, 0.5, -1.8);
            tvStand.castShadow = true;
            furnitureGroup.add(tvStand);

            // 電視
            const tv = new THREE.Mesh(
                new THREE.BoxGeometry(3.8, 2.2, 0.1),
                new THREE.MeshPhongMaterial({ color: 0x1a1a1a })
            );
            tv.position.set(1, 2.6, -1.7);
            furnitureGroup.add(tv);

            // 書架
            const bookshelfGroup = new THREE.Group();
            const shelfFrame = new THREE.Mesh(
                new THREE.BoxGeometry(1.5, 5, 0.4),
                new THREE.MeshPhongMaterial({ color: 0x8b6f47 })
            );
            shelfFrame.position.y = 2.5;
            bookshelfGroup.add(shelfFrame);

            // 層板
            for(let y = 0.5; y <= 4.5; y += 1) {
                const shelfBoard = new THREE.Mesh(
                    new THREE.BoxGeometry(1.4, 0.1, 0.35),
                    new THREE.MeshPhongMaterial({ color: 0x9d8166 })
                );
                shelfBoard.position.y = y;
                bookshelfGroup.add(shelfBoard);
            }
            bookshelfGroup.position.set(-4.5, 0, 1);
            furnitureGroup.add(bookshelfGroup);

            // 地毯
            const rug = new THREE.Mesh(
                new THREE.BoxGeometry(5, 0.05, 3.5),
                new THREE.MeshPhongMaterial({ color: 0xcd853f })
            );
            rug.position.set(1, 0.025, 2);
            furnitureGroup.add(rug);

            // === 餐廳區域 ===
            // 圓形餐桌
            const diningTableGroup = new THREE.Group();
            const diningTop = new THREE.Mesh(
                new THREE.CylinderGeometry(2, 2, 0.15),
                new THREE.MeshPhongMaterial({ color: 0x8b6914 })
            );
            diningTop.position.y = 0.9;
            diningTableGroup.add(diningTop);

            // 餐桌支柱
            const tablePillar = new THREE.Mesh(
                new THREE.CylinderGeometry(0.3, 0.4, 0.9),
                new THREE.MeshPhongMaterial({ color: 0x8b6914 })
            );
            tablePillar.position.y = 0.45;
            diningTableGroup.add(tablePillar);

            diningTableGroup.position.set(6.5, 0, 3.5);
            furnitureGroup.add(diningTableGroup);

            // 餐椅 - 6張圍繞圓桌
            for(let i = 0; i < 6; i++) {
                const angle = (i * Math.PI * 2) / 6;
                const chairGroup = new THREE.Group();

                // 椅座
                const seat = new THREE.Mesh(
                    new THREE.CylinderGeometry(0.35, 0.3, 0.15),
                    new THREE.MeshPhongMaterial({ color: 0xdaa520 })
                );
                seat.position.y = 0.6;
                chairGroup.add(seat);

                // 椅背
                const backrest = new THREE.Mesh(
                    new THREE.BoxGeometry(0.6, 1, 0.1),
                    new THREE.MeshPhongMaterial({ color: 0xcd853f })
                );
                backrest.position.set(0, 1.1, -0.25);
                chairGroup.add(backrest);

                // 椅腿
                for(let x = -0.2; x <= 0.2; x += 0.4) {
                    for(let z = -0.2; z <= 0.2; z += 0.4) {
                        const leg = new THREE.Mesh(
                            new THREE.CylinderGeometry(0.03, 0.03, 0.6),
                            new THREE.MeshPhongMaterial({ color: 0x8b6914 })
                        );
                        leg.position.set(x, 0.3, z);
                        chairGroup.add(leg);
                    }
                }

                chairGroup.position.set(
                    6.5 + Math.cos(angle) * 2.8,
                    0,
                    3.5 + Math.sin(angle) * 2.8
                );
                chairGroup.rotation.y = -angle;
                furnitureGroup.add(chairGroup);
            }

            // 餐邊櫃
            const sideboard = new THREE.Mesh(
                new THREE.BoxGeometry(2, 1.5, 0.5),
                new THREE.MeshPhongMaterial({ color: 0x8b6f47 })
            );
            sideboard.position.set(8.5, 0.75, 6);
            sideboard.castShadow = true;
            furnitureGroup.add(sideboard);

            // === 主臥室 ===
            const masterBedGroup = new THREE.Group();

            // 床墊
            const mattress = new THREE.Mesh(
                new THREE.BoxGeometry(4.5, 0.7, 5.5),
                new THREE.MeshPhongMaterial({ color: 0xfff8dc })
            );
            mattress.position.y = 0.5;
            masterBedGroup.add(mattress);

            // 床頭板
            const headboard = new THREE.Mesh(
                new THREE.BoxGeometry(4.6, 2.5, 0.4),
                new THREE.MeshPhongMaterial({ color: 0xdaa520 })
            );
            headboard.position.set(0, 1.75, -2.55);
            masterBedGroup.add(headboard);

            // 床單
            const blanket = new THREE.Mesh(
                new THREE.BoxGeometry(4.2, 0.4, 4),
                new THREE.MeshPhongMaterial({ color: 0xffdab9 })
            );
            blanket.position.set(0, 1, 0.5);
            masterBedGroup.add(blanket);

            // 枕頭
            for(let x = -1.2; x <= 1.2; x += 2.4) {
                const pillow = new THREE.Mesh(
                    new THREE.BoxGeometry(0.9, 0.4, 0.7),
                    new THREE.MeshPhongMaterial({ color: 0xffffff })
                );
                pillow.position.set(x, 1.05, -1.8);
                masterBedGroup.add(pillow);
            }

            masterBedGroup.position.set(-6.5, 0, -5.5);
            masterBedGroup.rotation.y = Math.PI / 2;
            furnitureGroup.add(masterBedGroup);

            // 床頭櫃（主臥）
            for(let x = -2.5; x <= 2.5; x += 5) {
                const nightstand = new THREE.Mesh(
                    new THREE.BoxGeometry(0.8, 0.7, 0.6),
                    new THREE.MeshPhongMaterial({ color: 0x8b6f47 })
                );
                nightstand.position.set(-6.5, 0.35, -5.5 + x);
                nightstand.castShadow = true;
                furnitureGroup.add(nightstand);

                // 檯燈
                const lampBase = new THREE.Mesh(
                    new THREE.CylinderGeometry(0.1, 0.1, 0.3),
                    new THREE.MeshPhongMaterial({ color: 0xdaa520 })
                );
                lampBase.position.set(-6.5, 0.85, -5.5 + x);
                furnitureGroup.add(lampBase);

                const lampShade = new THREE.Mesh(
                    new THREE.ConeGeometry(0.2, 0.4, 8),
                    new THREE.MeshPhongMaterial({ color: 0xfff8dc, emissive: 0xffcc66, emissiveIntensity: 0.3 })
                );
                lampShade.position.set(-6.5, 1.15, -5.5 + x);
                furnitureGroup.add(lampShade);
            }

            // 衣櫃（主臥）
            const wardrobe = new THREE.Mesh(
                new THREE.BoxGeometry(3.5, 7, 0.8),
                new THREE.MeshPhongMaterial({ color: 0xf5deb3 })
            );
            wardrobe.position.set(-8.5, 3.5, -2.5);
            wardrobe.castShadow = true;
            furnitureGroup.add(wardrobe);

            // === 次臥室1（兒童房）===
            const childBedGroup = new THREE.Group();

            const childMattress = new THREE.Mesh(
                new THREE.BoxGeometry(2.5, 0.5, 4),
                new THREE.MeshPhongMaterial({ color: 0xadd8e6 })
            );
            childMattress.position.y = 0.4;
            childBedGroup.add(childMattress);

            const childHeadboard = new THREE.Mesh(
                new THREE.BoxGeometry(2.6, 2, 0.2),
                new THREE.MeshPhongMaterial({ color: 0x87ceeb })
            );
            childHeadboard.position.set(0, 1.4, -1.9);
            childBedGroup.add(childHeadboard);

            childBedGroup.position.set(6.5, 0, -6);
            furnitureGroup.add(childBedGroup);

            // 學習桌
            const studyDeskGroup = new THREE.Group();
            const deskTop = new THREE.Mesh(
                new THREE.BoxGeometry(3, 0.15, 1.5),
                new THREE.MeshPhongMaterial({ color: 0xffe4b5 })
            );
            deskTop.position.y = 0.9;
            studyDeskGroup.add(deskTop);

            // 書架背板
            const bookBack = new THREE.Mesh(
                new THREE.BoxGeometry(2.8, 1.5, 0.1),
                new THREE.MeshPhongMaterial({ color: 0xffdead })
            );
            bookBack.position.set(0, 1.65, -0.7);
            studyDeskGroup.add(bookBack);

            studyDeskGroup.position.set(8, 0, -3.5);
            furnitureGroup.add(studyDeskGroup);

            // 玩具箱
            const toyBox = new THREE.Mesh(
                new THREE.BoxGeometry(1.5, 0.8, 1),
                new THREE.MeshPhongMaterial({ color: 0xff6347 })
            );
            toyBox.position.set(5, 0.4, -5);
            toyBox.castShadow = true;
            furnitureGroup.add(toyBox);

            // === 次臥室2（客房）===
            const guestBedGroup = new THREE.Group();

            const guestMattress = new THREE.Mesh(
                new THREE.BoxGeometry(3, 0.5, 4.5),
                new THREE.MeshPhongMaterial({ color: 0xf0e68c })
            );
            guestMattress.position.y = 0.4;
            guestBedGroup.add(guestMattress);

            const guestHeadboard = new THREE.Mesh(
                new THREE.BoxGeometry(3.1, 1.8, 0.2),
                new THREE.MeshPhongMaterial({ color: 0xd2b48c })
            );
            guestHeadboard.position.set(0, 1.3, -2.15);
            guestBedGroup.add(guestHeadboard);

            guestBedGroup.position.set(0, 0, -5.5);
            furnitureGroup.add(guestBedGroup);

            // 行李架
            const luggageRack = new THREE.Mesh(
                new THREE.BoxGeometry(2, 0.6, 0.8),
                new THREE.MeshPhongMaterial({ color: 0x8b7355 })
            );
            luggageRack.position.set(1.5, 0.3, -3);
            furnitureGroup.add(luggageRack);

            // === 浴室設施 ===
            // 浴室1 - 馬桶
            const toilet1 = new THREE.Group();
            const toiletBase1 = new THREE.Mesh(
                new THREE.BoxGeometry(0.5, 0.4, 0.7),
                new THREE.MeshPhongMaterial({ color: 0xffffff })
            );
            toiletBase1.position.y = 0.2;
            toilet1.add(toiletBase1);
            toilet1.position.set(-8, 0, 5.5);
            furnitureGroup.add(toilet1);

            // 洗手台1
            const sink1 = new THREE.Group();
            const sinkCabinet1 = new THREE.Mesh(
                new THREE.BoxGeometry(1.2, 0.8, 0.6),
                new THREE.MeshPhongMaterial({ color: 0x8b7d6b })
            );
            sinkCabinet1.position.y = 0.4;
            sink1.add(sinkCabinet1);

            const basin1 = new THREE.Mesh(
                new THREE.CylinderGeometry(0.3, 0.25, 0.15),
                new THREE.MeshPhongMaterial({ color: 0xffffff })
            );
            basin1.position.y = 0.9;
            sink1.add(basin1);

            sink1.position.set(-7.5, 0, 7);
            furnitureGroup.add(sink1);

            // 浴室2 - 馬桶
            const toilet2 = new THREE.Group();
            const toiletBase2 = new THREE.Mesh(
                new THREE.BoxGeometry(0.5, 0.4, 0.7),
                new THREE.MeshPhongMaterial({ color: 0xffffff })
            );
            toiletBase2.position.y = 0.2;
            toilet2.add(toiletBase2);
            toilet2.position.set(8, 0, 5.5);
            furnitureGroup.add(toilet2);

            // 洗手台2
            const sink2 = new THREE.Group();
            const sinkCabinet2 = new THREE.Mesh(
                new THREE.BoxGeometry(1.2, 0.8, 0.6),
                new THREE.MeshPhongMaterial({ color: 0x8b7d6b })
            );
            sinkCabinet2.position.y = 0.4;
            sink2.add(sinkCabinet2);

            const basin2 = new THREE.Mesh(
                new THREE.CylinderGeometry(0.3, 0.25, 0.15),
                new THREE.MeshPhongMaterial({ color: 0xffffff })
            );
            basin2.position.y = 0.9;
            sink2.add(basin2);

            sink2.position.set(7.5, 0, 7);
            furnitureGroup.add(sink2);

            // 浴缸
            const bathtub = new THREE.Mesh(
                new THREE.BoxGeometry(2, 0.8, 1.2),
                new THREE.MeshPhongMaterial({ color: 0xffffff })
            );
            bathtub.position.set(8, 0.4, 4);
            bathtub.castShadow = true;
            furnitureGroup.add(bathtub);
        }

        // 創建工業風格家具（簡化版）
        function createIndustrialFurniture() {
            const sofa = new THREE.Mesh(
                new THREE.BoxGeometry(6, 1.5, 2),
                new THREE.MeshPhongMaterial({ color: 0x2c3e50 })
            );
            sofa.position.set(2, 0.75, 5);
            sofa.castShadow = true;
            furnitureGroup.add(sofa);

            const coffeeTable = new THREE.Mesh(
                new THREE.BoxGeometry(4, 0.5, 2),
                new THREE.MeshPhongMaterial({ color: 0x222222, opacity: 0.7, transparent: true })
            );
            coffeeTable.position.set(2, 0.5, 2.5);
            furnitureGroup.add(coffeeTable);

            const tv = new THREE.Mesh(
                new THREE.BoxGeometry(4.5, 2.5, 0.1),
                new THREE.MeshPhongMaterial({ color: 0x0a0a0a })
            );
            tv.position.set(2, 2.5, -2);
            furnitureGroup.add(tv);

            const diningTable = new THREE.Mesh(
                new THREE.BoxGeometry(5, 0.2, 2),
                new THREE.MeshPhongMaterial({ color: 0x2c2c2c })
            );
            diningTable.position.set(7, 0.9, 4);
            diningTable.castShadow = true;
            furnitureGroup.add(diningTable);

            const masterBed = new THREE.Mesh(
                new THREE.BoxGeometry(4.5, 0.4, 5.5),
                new THREE.MeshPhongMaterial({ color: 0x606060 })
            );
            masterBed.position.set(-6, 0.5, -5.5);
            masterBed.castShadow = true;
            furnitureGroup.add(masterBed);

            const bed1 = new THREE.Mesh(
                new THREE.BoxGeometry(2.5, 0.6, 4),
                new THREE.MeshPhongMaterial({ color: 0x4a4a4a })
            );
            bed1.position.set(5, 0.3, -3);
            furnitureGroup.add(bed1);

            const bed2 = new THREE.Mesh(
                new THREE.BoxGeometry(2.5, 0.4, 4),
                new THREE.MeshPhongMaterial({ color: 0x555555 })
            );
            bed2.position.set(0, 0.5, -5);
            furnitureGroup.add(bed2);
        }

        // 創建現代風格家具（簡化版）
        function createHotelFurniture() {
            const sofa = new THREE.Mesh(
                new THREE.BoxGeometry(5, 1.8, 2.2),
                new THREE.MeshPhongMaterial({ color: 0x2d3748 })
            );
            sofa.position.set(0, 0.9, 4);
            sofa.castShadow = true;
            furnitureGroup.add(sofa);

            const coffeeTable = new THREE.Mesh(
                new THREE.BoxGeometry(3, 0.1, 1.8),
                new THREE.MeshPhongMaterial({ color: 0xf8f8f8, specular: 0xffffff, shininess: 100 })
            );
            coffeeTable.position.set(0, 0.5, 2);
            furnitureGroup.add(coffeeTable);

            const tv = new THREE.Mesh(
                new THREE.BoxGeometry(5, 3, 0.05),
                new THREE.MeshPhongMaterial({ color: 0x0a0a0a })
            );
            tv.position.set(0, 3.5, -2);
            furnitureGroup.add(tv);

            const diningTable = new THREE.Mesh(
                new THREE.CylinderGeometry(2.5, 2.5, 0.15, 32),
                new THREE.MeshPhongMaterial({ color: 0x1a202c, specular: 0x222222, shininess: 80 })
            );
            diningTable.position.set(7, 0.9, 4);
            diningTable.scale.x = 0.7;
            diningTable.castShadow = true;
            furnitureGroup.add(diningTable);

            const masterBed = new THREE.Mesh(
                new THREE.BoxGeometry(4.8, 0.6, 5.8),
                new THREE.MeshPhongMaterial({ color: 0xffffff })
            );
            masterBed.position.set(-6.5, 0.7, -5);
            masterBed.castShadow = true;
            furnitureGroup.add(masterBed);

            const bed1 = new THREE.Mesh(
                new THREE.BoxGeometry(3, 0.5, 4.5),
                new THREE.MeshPhongMaterial({ color: 0xffffff })
            );
            bed1.position.set(6.5, 0.4, -5.5);
            furnitureGroup.add(bed1);

            const bed2 = new THREE.Mesh(
                new THREE.BoxGeometry(2, 0.5, 4),
                new THREE.MeshPhongMaterial({ color: 0xffffff })
            );
            bed2.position.set(-1.5, 0.4, -5.5);
            furnitureGroup.add(bed2);
        }

        function createFurniture() {
            while(furnitureGroup.children.length > 0) {
                furnitureGroup.remove(furnitureGroup.children[0]);
            }

            switch(currentStyle) {
                case 'cozy':
                    createCozyFurniture();
                    break;
                case 'industrial':
                    createIndustrialFurniture();
                    break;
                case 'hotel':
                    createHotelFurniture();
                    break;
            }
        }

        const gridHelper = new THREE.GridHelper(25, 25, 0x999999, 0xdddddd);
        gridHelper.position.y = 0.01;
        scene.add(gridHelper);

        function switchStyle(styleName) {
            currentStyle = styleName;
            const style = styles[currentStyle];

            document.querySelectorAll('.styleBtn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.getElementById(styleName + 'Btn').classList.add('active');

            scene.background = new THREE.Color(style.background);

            ambientLight.intensity = style.ambientIntensity;
            pointLight1.color = new THREE.Color(style.pointLightColor);
            pointLight2.color = new THREE.Color(style.pointLightColor);

            createFloor();
            createWalls();
            createAllDoors();
            createFurniture();
        }

        createFloor();
        createWalls();
        createAllDoors();
        createFurniture();

        window.addEventListener('resize', () => {
            const container = document.getElementById('canvas-container');
            camera.aspect = container.clientWidth / container.clientHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(container.clientWidth, container.clientHeight);
        });

        function animate() {
            requestAnimationFrame(animate);
            controls.update();
            renderer.render(scene, camera);
        }

        animate();
    </script>
</body>
</html>
