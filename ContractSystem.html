<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>ç§Ÿé‡é» - ç°½ç´„ç³»çµ±</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Microsoft JhengHei", Arial, sans-serif;
            background: #f5f7fa;
            color: #333;
            padding-bottom: 20px;
        }

        .header {
            background: linear-gradient(135deg, #2196F3 0%, #42A5F5 100%);
            color: white;
            padding: 0 15px;
            height: 56px;
            display: flex;
            align-items: center;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            box-shadow: 0 2px 8px rgba(0,0,0,0.15);
        }

        .menu-btn {
            background: none;
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
            padding: 8px;
            margin-right: 12px;
        }

        .header-title {
            font-size: 20px;
            font-weight: 600;
            letter-spacing: 1px;
        }

        .sidebar {
            position: fixed;
            top: 0;
            left: -280px;
            width: 280px;
            height: 100vh;
            background: #1a1a2e;
            transition: left 0.3s ease;
            z-index: 2000;
            overflow-y: auto;
        }

        .sidebar.active {
            left: 0;
        }

        .sidebar-header {
            background: linear-gradient(135deg, #2196F3 0%, #42A5F5 100%);
            padding: 20px;
            color: white;
            font-size: 22px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .sidebar-menu {
            list-style: none;
            padding: 10px 0;
        }

        .sidebar-menu li {
            padding: 15px 20px;
            color: #fff;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 12px;
            transition: background 0.3s;
            font-size: 15px;
        }

        .sidebar-menu li:hover {
            background: rgba(33, 150, 243, 0.3);
        }

        .menu-icon {
            width: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            z-index: 1999;
            display: none;
        }

        .overlay.active {
            display: block;
        }

        .container {
            margin-top: 56px;
            padding: 15px;
            max-width: 480px;
            margin-left: auto;
            margin-right: auto;
        }

        .house-card {
            background: white;
            border-radius: 12px;
            overflow: hidden;
            margin-bottom: 15px;
            box-shadow: 0 2px 12px rgba(0,0,0,0.08);
        }

        .house-image {
            width: 100%;
            height: 180px;
            object-fit: cover;
            background: #e0e6ed;
        }

        .house-content {
            padding: 15px;
        }

        .house-title {
            font-size: 16px;
            font-weight: 600;
            color: #2196F3;
            margin-bottom: 8px;
        }

        .house-price {
            font-size: 20px;
            font-weight: 700;
            color: #e74c3c;
            margin-bottom: 10px;
        }

        .house-info {
            font-size: 13px;
            color: #666;
            line-height: 1.8;
            margin-bottom: 15px;
        }

        .house-info div {
            margin-bottom: 4px;
        }

        .action-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }

        .btn-view {
            padding: 10px;
            background: #f0f0f0;
            color: #666;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
        }

        .btn-contract {
            padding: 10px;
            background: linear-gradient(135deg, #4CAF50 0%, #66BB6A 100%);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-contract:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(76, 175, 80, 0.4);
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.6);
            z-index: 3000;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            border-radius: 16px;
            max-width: 450px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
        }

        .modal-header {
            background: linear-gradient(135deg, #2196F3 0%, #42A5F5 100%);
            color: white;
            padding: 20px 25px;
            font-size: 20px;
            font-weight: 600;
            border-radius: 16px 16px 0 0;
            text-align: center;
        }

        .modal-body {
            padding: 25px;
        }

        .step-indicator {
            display: flex;
            justify-content: space-between;
            margin-bottom: 25px;
            position: relative;
        }

        .step-indicator::before {
            content: '';
            position: absolute;
            top: 15px;
            left: 15px;
            right: 15px;
            height: 2px;
            background: #e0e0e0;
            z-index: 0;
        }

        .step {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            flex: 1;
            position: relative;
            z-index: 1;
        }

        .step-circle {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: #e0e0e0;
            color: #999;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 14px;
        }

        .step.active .step-circle {
            background: linear-gradient(135deg, #2196F3 0%, #42A5F5 100%);
            color: white;
        }

        .step.completed .step-circle {
            background: #4CAF50;
            color: white;
        }

        .step-label {
            font-size: 12px;
            color: #999;
            text-align: center;
        }

        .step.active .step-label {
            color: #2196F3;
            font-weight: 600;
        }

        .contract-section {
            margin-bottom: 20px;
        }

        .section-title {
            font-size: 16px;
            font-weight: 600;
            color: #2196F3;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .info-row {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid #f0f0f0;
            font-size: 14px;
        }

        .info-row:last-child {
            border-bottom: none;
        }

        .info-label {
            color: #666;
        }

        .info-value {
            color: #333;
            font-weight: 600;
        }

        .contract-terms {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            max-height: 200px;
            overflow-y: auto;
            margin-bottom: 15px;
            font-size: 13px;
            line-height: 1.8;
            color: #666;
        }

        .checkbox-agreement {
            display: flex;
            align-items: flex-start;
            gap: 10px;
            margin-bottom: 20px;
            padding: 15px;
            background: #fff3e0;
            border-radius: 8px;
        }

        .checkbox-agreement input {
            width: 20px;
            height: 20px;
            cursor: pointer;
            margin-top: 2px;
        }

        .checkbox-agreement label {
            font-size: 14px;
            color: #666;
            cursor: pointer;
            line-height: 1.6;
        }

        .signature-section {
            margin-bottom: 20px;
        }

        .signature-pad {
            border: 2px dashed #2196F3;
            border-radius: 8px;
            height: 150px;
            background: #f8f9fa;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #999;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .signature-pad:hover {
            background: #e3f2fd;
        }

        .signature-pad.signed {
            background: #e8f5e9;
            border-color: #4CAF50;
            color: #4CAF50;
        }

        .modal-footer {
            padding: 15px 25px;
            border-top: 1px solid #f0f0f0;
            display: flex;
            gap: 10px;
        }

        .btn-cancel {
            flex: 1;
            padding: 12px;
            background: #f0f0f0;
            color: #666;
            border: none;
            border-radius: 8px;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
        }

        .btn-next {
            flex: 2;
            padding: 12px;
            background: linear-gradient(135deg, #2196F3 0%, #42A5F5 100%);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
        }

        .btn-next:disabled {
            background: #e0e0e0;
            color: #999;
            cursor: not-allowed;
        }

        .btn-submit {
            flex: 2;
            padding: 12px;
            background: linear-gradient(135deg, #4CAF50 0%, #66BB6A 100%);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
        }

        .success-message {
            text-align: center;
            padding: 20px;
        }

        .success-icon {
            font-size: 64px;
            margin-bottom: 15px;
        }

        .success-title {
            font-size: 20px;
            font-weight: 600;
            color: #4CAF50;
            margin-bottom: 10px;
        }

        .success-text {
            font-size: 14px;
            color: #666;
            line-height: 1.6;
        }
    </style>
</head>
<body>
    <div class="header">
        <button class="menu-btn" onclick="toggleMenu()">â˜°</button>
        <div class="header-title">æˆ‘çš„ç§Ÿå±‹</div>
    </div>

    <div class="overlay" id="overlay" onclick="toggleMenu()"></div>

    <div class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <span>ğŸ </span>
            ç§Ÿé‡é»
        </div>
        <ul class="sidebar-menu">
            <li><span class="menu-icon">ğŸ </span>ç§Ÿå±‹åˆ—è¡¨</li>
            <li><span class="menu-icon">ğŸ¡</span>æˆ‘çš„ç§Ÿå±‹</li>
            <li><span class="menu-icon">â˜ï¸</span>ä¸Šå‚³ç§Ÿå±‹</li>
            <li><span class="menu-icon">ğŸ“§</span>é ç´„åˆ—è¡¨</li>
            <li><span class="menu-icon">ğŸ‘¥</span>æœƒå“¡åˆ—è¡¨</li>
            <li><span class="menu-icon">ğŸ‘¤</span>æœƒå“¡ä¸­å¿ƒ</li>
            <li><span class="menu-icon">ğŸ¢</span>åŠ å…¥å…¬å¸</li>
            <li><span class="menu-icon">ğŸ“</span>è¯çµ¡å®¢æœ</li>
            <li><span class="menu-icon">ğŸšª</span>ç™»å‡º</li>
        </ul>
    </div>

    <div class="container">
        <div class="house-card">
            <img src="https://images.unsplash.com/photo-1522708323590-d24dbb6b0267?w=600" class="house-image" alt="æˆ¿å±‹åœ–ç‰‡">
            <div class="house-content">
                <div class="house-title">æ·é‹å¿ å­å¾©èˆˆç«™æ—-æº«é¦¨å¥—æˆ¿</div>
                <div class="house-price">NT$ 28,000 / æœˆ</div>
                <div class="house-info">
                    <div>ğŸ“ å°åŒ—å¸‚å¤§å®‰å€å¾©èˆˆå—è·¯123è™Ÿ</div>
                    <div>ğŸ  ç¨ç«‹å¥—æˆ¿ | 15 åª</div>
                    <div>ğŸš‡ è·æ·é‹å¿ å­å¾©èˆˆç«™æ­¥è¡Œ 3 åˆ†é˜</div>
                    <div>ğŸ‘¤ æ‰¿ç§Ÿäººï¼šç‹å°æ˜</div>
                </div>
                <div class="action-buttons">
                    <button class="btn-view">æŸ¥çœ‹è©³æƒ…</button>
                    <button class="btn-contract" onclick="openContract()">ğŸ–Šï¸ æˆäº¤ç°½ç´„</button>
                </div>
            </div>
        </div>

        <div class="house-card">
            <img src="https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?w=600" class="house-image" alt="æˆ¿å±‹åœ–ç‰‡">
            <div class="house-content">
                <div class="house-title">æ¿æ©‹åºœä¸­ç«™-å…¨æ–°é›»æ¢¯å¤§æ¨“</div>
                <div class="house-price">NT$ 35,000 / æœˆ</div>
                <div class="house-info">
                    <div>ğŸ“ æ–°åŒ—å¸‚æ¿æ©‹å€åºœä¸­è·¯456è™Ÿ</div>
                    <div>ğŸ  æ•´å±¤ä½å®¶ | 25 åª</div>
                    <div>ğŸš‡ è·æ·é‹åºœä¸­ç«™æ­¥è¡Œ 2 åˆ†é˜</div>
                    <div>ğŸ‘¤ æ‰¿ç§Ÿäººï¼šæç¾ç²</div>
                </div>
                <div class="action-buttons">
                    <button class="btn-view">æŸ¥çœ‹è©³æƒ…</button>
                    <button class="btn-contract" onclick="openContract()">ğŸ–Šï¸ æˆäº¤ç°½ç´„</button>
                </div>
            </div>
        </div>

        <div class="house-card">
            <img src="https://images.unsplash.com/photo-1484154218962-a197022b5858?w=600" class="house-image" alt="æˆ¿å±‹åœ–ç‰‡">
            <div class="house-content">
                <div class="house-title">å—äº¬å¾©èˆˆç«™-é«˜æ¨“å±¤æ¡å…‰ä½³</div>
                <div class="house-price">NT$ 25,000 / æœˆ</div>
                <div class="house-info">
                    <div>ğŸ“ å°åŒ—å¸‚ä¸­å±±å€å—äº¬æ±è·¯789è™Ÿ</div>
                    <div>ğŸ  ç¨ç«‹å¥—æˆ¿ | 12 åª</div>
                    <div>ğŸš‡ è·æ·é‹å—äº¬å¾©èˆˆç«™æ­¥è¡Œ 5 åˆ†é˜</div>
                    <div>ğŸ‘¤ æ‰¿ç§Ÿäººï¼šå¼µå¤§å‰</div>
                </div>
                <div class="action-buttons">
                    <button class="btn-view">æŸ¥çœ‹è©³æƒ…</button>
                    <button class="btn-contract" onclick="openContract()">ğŸ–Šï¸ æˆäº¤ç°½ç´„</button>
                </div>
            </div>
        </div>
    </div>

    <!-- ç°½ç´„Modal -->
    <div class="modal" id="contractModal">
        <div class="modal-content">
            <div class="modal-header">
                <span>ğŸ“</span> ç·šä¸Šç°½ç´„ç³»çµ±
            </div>
            <div class="modal-body">
                <!-- æ­¥é©ŸæŒ‡ç¤ºå™¨ -->
                <div class="step-indicator">
                    <div class="step active" id="step1">
                        <div class="step-circle">1</div>
                        <div class="step-label">ç¢ºèªè³‡è¨Š</div>
                    </div>
                    <div class="step" id="step2">
                        <div class="step-circle">2</div>
                        <div class="step-label">å¯©é–±æ¢æ¬¾</div>
                    </div>
                    <div class="step" id="step3">
                        <div class="step-circle">3</div>
                        <div class="step-label">é›»å­ç°½å</div>
                    </div>
                    <div class="step" id="step4">
                        <div class="step-circle">4</div>
                        <div class="step-label">å®Œæˆç°½ç´„</div>
                    </div>
                </div>

                <!-- æ­¥é©Ÿ1ï¼šç¢ºèªè³‡è¨Š -->
                <div id="stepContent1" class="step-content">
                    <div class="contract-section">
                        <div class="section-title">ğŸ  ç‰©ä»¶è³‡è¨Š</div>
                        <div class="info-row">
                            <span class="info-label">ç‰©ä»¶åç¨±</span>
                            <span class="info-value">æ·é‹å¿ å­å¾©èˆˆç«™æ—-æº«é¦¨å¥—æˆ¿</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">ç‰©ä»¶åœ°å€</span>
                            <span class="info-value">å°åŒ—å¸‚å¤§å®‰å€å¾©èˆˆå—è·¯123è™Ÿ</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">ç§Ÿé‡‘</span>
                            <span class="info-value">NT$ 28,000 / æœˆ</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">æŠ¼é‡‘</span>
                            <span class="info-value">NT$ 56,000ï¼ˆ2å€‹æœˆï¼‰</span>
                        </div>
                    </div>

                    <div class="contract-section">
                        <div class="section-title">ğŸ‘¤ æ‰¿ç§Ÿäººè³‡è¨Š</div>
                        <div class="info-row">
                            <span class="info-label">å§“å</span>
                            <span class="info-value">ç‹å°æ˜</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">èº«åˆ†è­‰å­—è™Ÿ</span>
                            <span class="info-value">A123456789</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">è¯çµ¡é›»è©±</span>
                            <span class="info-value">0912-345-678</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">é›»å­éƒµä»¶</span>
                            <span class="info-value">ming123@gmail.com</span>
                        </div>
                    </div>

                    <div class="contract-section">
                        <div class="section-title">ğŸ“… ç§Ÿè³ƒæœŸé™</div>
                        <div class="info-row">
                            <span class="info-label">èµ·ç§Ÿæ—¥æœŸ</span>
                            <span class="info-value">2025/11/01</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">åˆ°æœŸæ—¥æœŸ</span>
                            <span class="info-value">2026/10/31</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">ç§ŸæœŸ</span>
                            <span class="info-value">12 å€‹æœˆ</span>
                        </div>
                    </div>
                </div>

                <!-- æ­¥é©Ÿ2ï¼šå¯©é–±æ¢æ¬¾ -->
                <div id="stepContent2" class="step-content" style="display: none;">
                    <div class="contract-section">
                        <div class="section-title">ğŸ“„ ç§Ÿè³ƒå¥‘ç´„æ¢æ¬¾</div>
                        <div class="contract-terms">
                            <h4>ç¬¬ä¸€æ¢ ç§Ÿè³ƒæ¨™çš„</h4>
                            <p>å‡ºç§ŸäººåŒæ„å°‡åè½æ–¼å°åŒ—å¸‚å¤§å®‰å€å¾©èˆˆå—è·¯123è™Ÿä¹‹æˆ¿å±‹å‡ºç§Ÿäºˆæ‰¿ç§Ÿäººä½¿ç”¨ã€‚</p>

                            <h4>ç¬¬äºŒæ¢ ç§Ÿè³ƒæœŸé–“</h4>
                            <p>ç§Ÿè³ƒæœŸé–“è‡ªæ°‘åœ‹114å¹´11æœˆ1æ—¥èµ·è‡³æ°‘åœ‹115å¹´10æœˆ31æ—¥æ­¢ï¼Œå…±è¨ˆ12å€‹æœˆã€‚</p>

                            <h4>ç¬¬ä¸‰æ¢ ç§Ÿé‡‘ç´„å®š</h4>
                            <p>æ¯æœˆç§Ÿé‡‘ç‚ºæ–°å°å¹£è²³è¬æŒä»Ÿå…ƒæ•´ï¼ˆNT$28,000ï¼‰ï¼Œæ‰¿ç§Ÿäººæ‡‰æ–¼æ¯æœˆ5æ—¥å‰æ”¯ä»˜ç•¶æœˆç§Ÿé‡‘ã€‚</p>

                            <h4>ç¬¬å››æ¢ æŠ¼é‡‘</h4>
                            <p>æ‰¿ç§Ÿäººæ‡‰æ”¯ä»˜æŠ¼é‡‘æ–°å°å¹£ä¼è¬é™¸ä»Ÿå…ƒæ•´ï¼ˆNT$56,000ï¼‰ï¼Œå‡ºç§Ÿäººæ‡‰æ–¼ç§ŸæœŸå±†æ»¿ä¸”é»äº¤ç„¡èª¤å¾Œç„¡æ¯é€€é‚„ã€‚</p>

                            <h4>ç¬¬äº”æ¢ ä½¿ç”¨é™åˆ¶</h4>
                            <p>æ‰¿ç§Ÿäººæ‡‰ä»¥å–„è‰¯ç®¡ç†äººä¹‹æ³¨æ„ä½¿ç”¨æˆ¿å±‹ï¼Œä¸å¾—æ“…è‡ªæ”¹å»ºã€å¢å»ºæˆ–è®Šæ›´ä½¿ç”¨æ€§è³ªã€‚</p>

                            <h4>ç¬¬å…­æ¢ ä¿®ç¹•è²¬ä»»</h4>
                            <p>æˆ¿å±‹åŠé™„å±¬è¨­å‚™ä¹‹ä¿®ç¹•ï¼Œç”±å‡ºç§Ÿäººè² è²¬ã€‚ä½†å› æ‰¿ç§Ÿäººä¹‹éå¤±æ‰€è‡´è€…ï¼Œç”±æ‰¿ç§Ÿäººè² è²¬ä¿®ç¹•ã€‚</p>

                            <h4>ç¬¬ä¸ƒæ¢ æå‰çµ‚æ­¢</h4>
                            <p>å¦‚æ¬²æå‰çµ‚æ­¢ç§Ÿç´„ï¼Œæ‡‰æ–¼30æ—¥å‰é€šçŸ¥ä»–æ–¹ï¼Œä¸¦ä¾ç´„å®šè³ å„Ÿã€‚</p>

                            <h4>ç¬¬å…«æ¢ çˆ­è­°è™•ç†</h4>
                            <p>é›™æ–¹å› æœ¬å¥‘ç´„ç™¼ç”Ÿçˆ­è­°æ™‚ï¼Œæ‡‰æœ¬èª ä¿¡åŸå‰‡å”å•†è§£æ±ºã€‚å¦‚å”å•†ä¸æˆï¼ŒåŒæ„ä»¥å°ç£å°åŒ—åœ°æ–¹æ³•é™¢ç‚ºç¬¬ä¸€å¯©ç®¡è½„æ³•é™¢ã€‚</p>
                        </div>

                        <div class="checkbox-agreement">
                            <input type="checkbox" id="agreeTerms" onchange="toggleNextButton()">
                            <label for="agreeTerms">
                                æˆ‘å·²è©³ç´°é–±è®€ä¸¦åŒæ„ä¸Šè¿°æ‰€æœ‰ç§Ÿè³ƒå¥‘ç´„æ¢æ¬¾ï¼Œé¡˜æ„éµå®ˆå¥‘ç´„å…§å®¹ä¹‹å„é …è¦å®šã€‚
                            </label>
                        </div>
                    </div>
                </div>

                <!-- æ­¥é©Ÿ3ï¼šé›»å­ç°½å -->
                <div id="stepContent3" class="step-content" style="display: none;">
                    <div class="contract-section">
                        <div class="section-title">âœï¸ é›»å­ç°½å</div>
                        <p style="font-size: 14px; color: #666; margin-bottom: 15px;">
                            è«‹é»æ“Šä¸‹æ–¹ç°½åå€åŸŸé€²è¡Œé›»å­ç°½åï¼Œç¢ºèªæ‚¨åŒæ„ç°½ç½²æœ¬ç§Ÿè³ƒå¥‘ç´„ã€‚
                        </p>
                        <div class="signature-pad" id="signaturePad" onclick="doSign()">
                            <span>é»æ“Šæ­¤è™•é€²è¡Œé›»å­ç°½å</span>
                        </div>
                    </div>

                    <div class="contract-section" style="margin-top: 20px;">
                        <div class="section-title">ğŸ” èº«åˆ†é©—è­‰</div>
                        <div class="info-row">
                            <span class="info-label">é©—è­‰æ–¹å¼</span>
                            <span class="info-value" style="color: #4CAF50;">âœ“ æ‰‹æ©Ÿç°¡è¨Š OTP</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">ç°½ç½²æ™‚é–“</span>
                            <span class="info-value" id="signTime">-</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">IP ä½å€</span>
                            <span class="info-value">203.123.45.67</span>
                        </div>
                    </div>
                </div>

                <!-- æ­¥é©Ÿ4ï¼šå®Œæˆç°½ç´„ -->
                <div id="stepContent4" class="step-content" style="display: none;">
                    <div class="success-message">
                        <div class="success-icon">ğŸ‰</div>
                        <div class="success-title">ç°½ç´„æˆåŠŸï¼</div>
                        <div class="success-text">
                            æ­å–œæ‚¨å®Œæˆç·šä¸Šç°½ç´„æµç¨‹ï¼<br><br>

                            å¥‘ç´„ç·¨è™Ÿï¼š<strong>RC-2025-001234</strong><br>
                            ç°½ç´„æ™‚é–“ï¼š<span id="contractTime"></span><br><br>

                            å®Œæ•´çš„ç§Ÿè³ƒå¥‘ç´„å·²ç™¼é€è‡³æ‚¨çš„é›»å­éƒµä»¶ï¼Œ<br>
                            è«‹å¦¥å–„ä¿å­˜ä»¥å‚™æ—¥å¾ŒæŸ¥é–±ã€‚<br><br>

                            ğŸ’° è«‹æ–¼ 3 æ—¥å…§å®ŒæˆæŠ¼é‡‘åŠç¬¬ä¸€å€‹æœˆç§Ÿé‡‘ç¹³ç´ã€‚<br>
                            ğŸ“§ ç¹³è²»é€šçŸ¥å·²ç™¼é€è‡³æ‚¨çš„ä¿¡ç®±ã€‚
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn-cancel" onclick="closeContract()">å–æ¶ˆ</button>
                <button class="btn-next" id="nextBtn" onclick="nextStep()">ä¸‹ä¸€æ­¥</button>
            </div>
        </div>
    </div>

    <script>
        let currentStep = 1;
        let isSigned = false;

        function toggleMenu() {
            const sidebar = document.getElementById('sidebar');
            const overlay = document.getElementById('overlay');
            sidebar.classList.toggle('active');
            overlay.classList.toggle('active');
        }

        function openContract() {
            document.getElementById('contractModal').classList.add('active');
            currentStep = 1;
            isSigned = false;
            updateSteps();
        }

        function closeContract() {
            if (currentStep === 4) {
                // å¦‚æœå·²å®Œæˆï¼Œé—œé–‰ä¸¦é‡æ–°æ•´ç†
                document.getElementById('contractModal').classList.remove('active');
                alert('æ„Ÿè¬æ‚¨ä½¿ç”¨ç§Ÿé‡é»ç·šä¸Šç°½ç´„ç³»çµ±ï¼');
            } else {
                if (confirm('ç¢ºå®šè¦å–æ¶ˆç°½ç´„æµç¨‹å—ï¼Ÿ')) {
                    document.getElementById('contractModal').classList.remove('active');
                }
            }
        }

        function updateSteps() {
            // æ›´æ–°æ­¥é©ŸæŒ‡ç¤ºå™¨
            for (let i = 1; i <= 4; i++) {
                const step = document.getElementById('step' + i);
                const content = document.getElementById('stepContent' + i);

                if (i < currentStep) {
                    step.classList.add('completed');
                    step.classList.remove('active');
                } else if (i === currentStep) {
                    step.classList.add('active');
                    step.classList.remove('completed');
                } else {
                    step.classList.remove('active', 'completed');
                }

                if (content) {
                    content.style.display = i === currentStep ? 'block' : 'none';
                }
            }

            // æ›´æ–°æŒ‰éˆ•
            const nextBtn = document.getElementById('nextBtn');
            if (currentStep === 1) {
                nextBtn.textContent = 'ä¸‹ä¸€æ­¥';
                nextBtn.onclick = nextStep;
                nextBtn.disabled = false;
            } else if (currentStep === 2) {
                nextBtn.textContent = 'ä¸‹ä¸€æ­¥';
                nextBtn.onclick = nextStep;
                toggleNextButton();
            } else if (currentStep === 3) {
                nextBtn.textContent = 'ç¢ºèªç°½ç½²';
                nextBtn.onclick = nextStep;
                nextBtn.disabled = !isSigned;
            } else if (currentStep === 4) {
                nextBtn.textContent = 'å®Œæˆ';
                nextBtn.onclick = closeContract;
                nextBtn.disabled = false;
                nextBtn.className = 'btn-submit';
            }
        }

        function toggleNextButton() {
            const checkbox = document.getElementById('agreeTerms');
            const nextBtn = document.getElementById('nextBtn');
            if (currentStep === 2) {
                nextBtn.disabled = !checkbox.checked;
            }
        }

        function nextStep() {
            if (currentStep === 3 && !isSigned) {
                alert('è«‹å…ˆå®Œæˆé›»å­ç°½åï¼');
                return;
            }

            if (currentStep < 4) {
                currentStep++;

                if (currentStep === 4) {
                    // è¨­å®šç°½ç´„å®Œæˆæ™‚é–“
                    const now = new Date();
                    document.getElementById('contractTime').textContent =
                        now.getFullYear() + '/' +
                        String(now.getMonth() + 1).padStart(2, '0') + '/' +
                        String(now.getDate()).padStart(2, '0') + ' ' +
                        String(now.getHours()).padStart(2, '0') + ':' +
                        String(now.getMinutes()).padStart(2, '0');
                }

                updateSteps();
            } else {
                closeContract();
            }
        }

        function doSign() {
            if (!isSigned) {
                const now = new Date();
                const timeStr = now.getFullYear() + '/' +
                    String(now.getMonth() + 1).padStart(2, '0') + '/' +
                    String(now.getDate()).padStart(2, '0') + ' ' +
                    String(now.getHours()).padStart(2, '0') + ':' +
                    String(now.getMinutes()).padStart(2, '0') + ':' +
                    String(now.getSeconds()).padStart(2, '0');

                document.getElementById('signTime').textContent = timeStr;

                const pad = document.getElementById('signaturePad');
                pad.classList.add('signed');
                pad.innerHTML = 'âœ“ å·²å®Œæˆé›»å­ç°½å<br><small>ç°½ç½²æ™‚é–“ï¼š' + timeStr + '</small>';

                isSigned = true;
                updateSteps();

                alert('é›»å­ç°½åå®Œæˆï¼\n\nå·²é€šéæ‰‹æ©Ÿç°¡è¨Š OTP é©—è­‰');
            }
        }

        // é»æ“Š Modal å¤–éƒ¨ä¸é—œé–‰ï¼ˆé˜²æ­¢èª¤è§¸ï¼‰
        window.onclick = function(event) {
            if (event.target === document.getElementById('contractModal')) {
                // ä¸åšä»»ä½•äº‹ï¼Œé¿å…æ„å¤–é—œé–‰
            }
        };
    </script>
</body>
</html>
